@using Microsoft.AspNetCore.Mvc.TagHelpers
@using PalletOptimization.Enums
@model IEnumerable<PalletOptimization.Models.Elements>

@{
    ViewData["Title"] = "Planner";
}

<h1>Planner</h1>

<div style="display: flex; justify-content: space-between; align-items: flex-start;">
    <!-- Left Side: Elements Table -->
    <div style="width: 60%; margin-right: 20px;border: 1px solid; border-radius:5px; border-color: aqua;">
        @if (Model?.Count() > 0)
        {   
            <table class="table">
                <thead>
                    <tr>
                        <th>@Html.DisplayNameFor(model => model.Name)</th>
                        <th>@Html.DisplayNameFor(model => model.RotationRules)</th>
                        <th>@Html.DisplayNameFor(model => model.IsSpecial)</th>
                        <th>@Html.DisplayNameFor(model => model.MaxElementsPerPallet)</th>
                        <th>@Html.DisplayNameFor(model => model.Length) (mm)</th>
                        <th>@Html.DisplayNameFor(model => model.Width) (mm)</th>
                        <th>@Html.DisplayNameFor(model => model.Height) (mm)</th>
                        <th>@Html.DisplayNameFor(model => model.Weight) (Kg)</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <th>@Html.DisplayFor(modelItem => item.Name)</th>
                            <td>
                                <form asp-action="UpdateRotationRule" method="post" style="display: inline;">
                                    <input type="hidden" name="ElementId" value="@item.Id" />
                                    <select class="form-control" name="SelectedRotationRule">
                                        @foreach (var option in Enum.GetValues(typeof(RotationOptions)).Cast<RotationOptions>())
                                        {
                                        <option
                                            value="@((int)option)"
                                            selected="@(item.RotationRules == option ? "selected" : null)">
                                            @option
                                        </option>
                                        }
                                    </select>   
                                </form>
                            </td>


                            <td>@Html.DisplayFor(modelItem => item.IsSpecial)</td>
                            <td>@Html.DisplayFor(modelItem => item.MaxElementsPerPallet)</td>
                            <td>@Html.DisplayFor(modelItem => item.Length)</td>
                            <td>@Html.DisplayFor(modelItem => item.Width)</td>
                            <td>@Html.DisplayFor(modelItem => item.Height)</td>
                            <td>@Html.DisplayFor(modelItem => item.Weight)</td>
                            
                        </tr>
                    }
                </tbody>
            </table>
            <div style="text-align: right; margin-top: 10px;">
                <a asp-action="GeneratePackingPlan" class="btn" style="padding: 10px 20px; background-color: #00BB33; color: white; border-radius: 5px; cursor: pointer; margin-right: 10px; ">
                    Get Packing Plan!
                </a>
            </div>
        }
        else
        {
            <p>No order loaded, want to add a random one?</p>
            <div style="margin-top: 10px;">
                <a asp-action="MakeOrder" style="padding: 10px 20px; background-color: #007BFF; color: white; border-radius: 5px; cursor: pointer;">
                    Generate order
                </a>
            </div>
        }
    </div>

    <!-- Right Side: Pallet Customization Form -->
    <div style="width: 40%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
        <h3 id="CustomizePallet">Pallet Customization</h3>
        <form>
            <div class="mb-3">
                <label for="MaxHeight" class="form-label">Max Height for Pallet + Element (mm)</label>
                <input type="number" class="form-control" id="MaxHeight" placeholder="Enter max height">
            </div>

            <div class="mb-3">
                <label for="MaxWeight" class="form-label">Max Weight (kg)</label>
                <input type="number" class="form-control" id="MaxWeight" placeholder="Enter max weight">
            </div>

            <div class="mb-3">
                <label for="Overhang" class="form-label">Overhang (mm)</label>
                <input type="number" class="form-control" id="Overhang" placeholder="Enter overhang">
            </div>

            <div class="mb-3">
                <label for="SpaceBetween" class="form-label">Space Between Elements (mm)</label>
                <input type="number" class="form-control" id="SpaceBetween" placeholder="Enter space between elements">
            </div>

            <div class="mb-3">
                <label for="StackingHeight" class="form-label">Allow Stacking Up to (mm)</label>
                <input type="number" class="form-control" id="StackingHeight" placeholder="Enter stacking height">
            </div>

            <div class="mb-3">
                <label for="StackingWeight" class="form-label">Allow Stacking Up to (kg)</label>
                <input type="number" class="form-control" id="StackingWeight" placeholder="Enter stacking weight">
            </div>

            <div class="mb-3">
                <label for="AddedPlate" class="form-label">Added Plate on Side (mm)</label>
                <input type="number" class="form-control" id="AddedPlate" placeholder="Enter added plate thickness">
            </div>

            <div class="mb-3">
                <label for="MaxPalletSpace" class="form-label">Max Amount of Space on Pallet (mm²)</label>
                <input type="number" class="form-control" id="MaxPalletSpace" placeholder="Enter max space">
            </div>

            <button type="button" class="btn btn-primary">Save Pallet Settings</button>
        </form>
    </div>
</div>
